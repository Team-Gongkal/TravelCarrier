<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<!-- head 추가해줌 -->
<th:block th:replace="fragments/head :: headFragment"></th:block>

<body>
  <th:block th:replace="fragments/header :: headerFragment"></th:block>
  <main class="daily">
    <!-- daily 시작화면 UI -->
    <div class="daily_start" style="display: none;">
      <div class="sdaily_text">
        <p><b>여행</b>동안 경험했던 <b>소중한 추억</b>을
        </p>
        <p>사진과 함께 남겨주세요</p>
      </div>
      <div class="writing square rectL">
        <div class="circle">
          <img src="/image/daily/icon/pencil.png" alt="edit diary icon">
        </div>
        <span>글쓰기</span>
      </div>
    </div>


    <!--daily-form 데일리 입력 폼/ 모달창-->
    <div class="daily_form_bg">
      <form action="" id="daily_form">
        <div class="modal_title Dform_title">
          <button class="close">
            <i class="xi-close xi-2x"></i>
          </button>
          <h3>일기장</h3>
        </div>
        <div class="Dform">
          <div class="default_Dform_imgs" style="display: none;">
            <label>
              <div>
                <input type="file" class="attach" multiple>
                <img src="/image/daily/icon/upload-b.png" alt="">
                <p>클릭하여 파일을 선택하거나</p>
                <p>드래그하여 파일을 업로드해주세요</p>
              </div>
            </label>
          </div>
          <div class="Dform_imgs" style="display: none;">
            <p>이미지를 드래그하여 순서를 편집할 수 있습니다.</p>
            <div class="Dform_container">
              <ul class="Dform_imglist">
                <li id="moreImgLi">
                  <input type="file" multiple id="moreImg" class="attach">
                  <label for="moreImg"><i class="xi-plus"></i></label>
                </li>
                </li>
              </ul>
            </div>
          </div>
          <div class="Dform_input">
            <div class="daily_days">
              <ul class="days_tabSlide">
                <li class="Dtab days_num1">
                  <span class="on">DAY1</span>
                </li>
                <li th:each="i : ${#numbers.sequence(1, period - 1)}" class="Dtab days_num1">
                  <span th:text="'DAY' + ${i + 1}">DAY ?</span>
                </li>
              </ul>
            </div>
            <div class="daily_title">
              <h3>제목(선택)</h3>
              <input type="text" placeholder="제목을 작성해주세요">
            </div>
            <div class="daily_text">
              <h3>메모</h3>
              <textarea name="" id="" cols="30" rows="10" placeholder="일기를 작성해주세요"></textarea>
            </div>
            <div class="daily_files">
              <h3>이미지 파일</h3>
              <div class="filePath">
                <p>/파일명.jpg</p>
                <input type="file" id="fileChange">
                <label for="fileChange">
                  <img src="/image/daily/icon/changeImg.svg" alt="이미지변경아이콘">
                </label>
              </div>
              <input type="radio" id="mainImgSet" name="mainImg">
              <label for="mainImgSet">대표이미지로 설정</label>
              <b>i (대표이미지는 여행일별 대표 이미지를 의미합니다)</b>
            </div>
            <div class="Dform_btn">
              <button class="btn Dform_btn_del" type="reset"> 작성취소</button>
              <button class="btn Dform_btn_save" type="submit">저장하기</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <!-- daily 일기화면(hover전) -->
    <div class="diary_noH">
      <div class="center">
        <div class="filter"></div>
        <div class="diary_titlebox">
          <h1 th:text="${weekly.title}">PARIS</h1>
          <p th:text="'기간 : ' + ${weekly.travelDate.sDate} + ' ~ ' + ${weekly.travelDate.eDate}"> 기간 : yyyy-mm-dd ~
            yyyy-mm-dd</p>
          <div class="diary_textbox on">
            <ul>
              <li th:each="daily : ${dailies}">
                <h6 th:text=" ${daily.attachDailyTitle}">
                </h6>
                <p th:text="${daily.attachDailyText}"></p>
              </li>
            </ul>
          </div>
        </div>
        <div class="diary_viewport">
          <div class="diary_slides">
            <ul th:each="groupedDaily : ${groupedDailies}" th:class="${groupedDaily.key} + ' diary_list'"
              class="diary_list">
              <li th:each="daily : ${groupedDaily.value}" th:id="${daily.attachNo}" class="d_slide square">
                <img th:src="${daily.attachThumb}" src="/image/daily/diary/IMG_6493.JPG" alt="">
              </li>
            </ul>
          </div>
        </div>
        <div class="writing circle">
          <img src="/image/daily/icon/pencil.png" alt="edit daily">
        </div>
      </div>

    </div>
  </main>

  <script th:inline="javascript">
    var dailies = [[${ dailies }]];
  </script>
  <script th:inline="javascript">
    /*<![CDATA[*/
    $(".diary_viewport").on("mouseenter", ".d_slide", function () {
      var diaryID = $(this).attr("id");
      console.log(diaryID);
      $(".diary_textbox > ul > li").attr("th:id =" + "#" + diaryID);

      $(".diary_textbox > ul > li > h6").attr(
        "th:text=${#" + diaryID + ".daily.attachDailyTitle}"
      );
    });
/*]]>*/
  </script>

  <!-- <script src="/script/daily.js"></script> -->
  <script src="/script/daily(modal).js"></script>
</body>


</html>